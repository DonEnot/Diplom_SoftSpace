@using SoftSpace_web.Models;
@{
    ViewData["Title"] = "Home Page";
    bool is_first_item = true;
    bool is_first = true;
    int is_first_item_index =0;
   
    int previous  = 0;
    int next = 1;
    int this_page = 0;
    
    if(@ViewBag.Page.currect_number < 0)
      {
        this_page = 0;
      }
    else
      {
        this_page = @ViewBag.Page.currect_number;
      }
      
    if(this_page > 0) 
      {
        previous = this_page - 1;
      }
    else
      {
        this_page = 0;
      }
    
    next = this_page  +1 ;
}

@await Component.InvokeAsync("Menu" , new {})




<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
     @foreach( var a in @ViewBag.Page.new_product) 
      {
        if(is_first_item)
        {
          <li data-target="#carouselExampleIndicators" data-slide-to="@is_first_item_index" class="active"></li>
          is_first_item = false;
        }
        else
        {
          <li data-target="#carouselExampleIndicators" data-slide-to="is_first_item_index"></li>
        }
        is_first_item_index++;
      }
  </ol>
  <div class="carousel-inner">
     @foreach( var a in @ViewBag.Page.new_product) 
          {
            string pic = a[7] + "2.png";
            if(is_first)
            {
                <div class="carousel-item active">
                  <img src="~/Pictures/@pic" class="d-block w-100" alt="...">
                  
                  <div class="carousel-caption d-none d-md-block">
                    <h4>@a[1]</h4>
                    <h5>@a[5]</h5>
                  </div>
                </div>
              is_first = false;
            }
            else
            {
              <div class="carousel-item ">
                  <img src="~/Pictures/@pic" class="d-block w-100" alt="...">
                  <div class="carousel-caption d-none d-md-block">
                    <h4>@a[1]</h4>
                    <h5>@a[5]</h5>
                  </div>
              </div>
            }
          }
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>




<div class ="row" >
  @foreach( var a in @ViewBag.Page.new_product) 
  {
    <div class="_Cart">
      <div class="card" style="width: 18rem; max-height:400px;">
      @{
        string pic = @a[7] + ".png";
        <img src="~/Pictures/@pic" class="card-img-top" alt="...">
        <div class="card-body">
          <h4 class="card-title">@a[1]</h4>
          <h5 class="card-title">@ViewBag.Words_translate[35]: @a[5]</h5>
          <a class="btn btn-primary" asp-controller="Product"  asp-action="ShowProduct" asp-route-id_product = "@a[0]">@ViewBag.Words_translate[3]</a>
        </div>
      }
      </div>
    </div>
    
  }
</div>

@if(@ViewBag.Page.count_pages > 1 )
{
<nav aria-label="...">
  <ul class="pagination">
    @if(this_page > 0)
    {
    <li class="page-item">
      <a class="page-link" asp-controller="Home"  asp-action="Index" asp-route-numb_page = "@previous"  aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
        <span class="sr-only">Previous</span>
      </a>
    </li>
    }

    
    


    @if(this_page < 12)
    {
      @for(int i = 0;i < 19; i++ )
      {
        int nn_page = i; 
         @if(nn_page == this_page)
        {
          <li class="page-item active">
            <a class="page-link" asp-controller="Home"  asp-action="Index" asp-route-numb_page = "@this_page">@(this_page + 1) <span class="sr-only">(current)</span></a>
          </li>

        }
        else{
          if((i < @ViewBag.Page.count_pages)&&(i >= 0))
          {
            <a class="page-link" asp-controller="Home"  asp-action="Index" asp-route-numb_page = "@nn_page" >@(nn_page + 1)</a>
          }
        }
      }
      
    }
    else
    {
      @for( int i =  Convert.ToInt32(this_page) - 9 ;
        i < Convert.ToInt32(this_page) + 10; i++)
      {
        
        int nn_page = i;
        
        @if(nn_page == this_page)
        {
          <li class="page-item active">
            <a class="page-link" asp-controller="Home"  asp-action="Index" asp-route-numb_page = "@this_page">@(this_page + 1) <span class="sr-only">(current)</span></a>
          </li>

        }
        else{
          if((i < @ViewBag.Page.count_pages)&&(i >= 0))
          {
            <a class="page-link" asp-controller="Home"  asp-action="Index" asp-route-numb_page = "@nn_page" >@(nn_page + 1)</a>
          }
        }
      }


    }

    @if(next < @ViewBag.Page.count_pages)
    {
    <li class="page-item">
      <a class="page-link" asp-controller="Home"  asp-action="Index" asp-route-numb_page = "@next" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
        <span class="sr-only">Next</span>
      </a>
    </li>
    }

  </ul>
</nav>
}


